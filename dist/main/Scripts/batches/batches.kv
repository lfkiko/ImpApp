#:import utils kivy.utils


<batchesWindow>
    name: "batches"
    BoxLayout:
        padding: 10
        spacing: 20
        orientation: "vertical"
        size: root.width, root.height

        HeaderLabel:
            text: "Batches"

        BoxLayout:
            orientation: "vertical"
            size: root.width, root.height
            padding: 10
            spacing: 20

            GridLayout:
                cols: 2
                size_hint_y: None
                height:90
                spacing: 20
                padding: 20
                MySpinner:
                    id: method
                    text: "Choose a Method"
                    values: 'New Batch','Modify existing batch'

#                MySpinner:
#                    id: batch
#                    text: "Choose batch"
#                    values: 'data-assets','push', 'ACT', 'purging'


                GridLayout:
                    id: checkBoxs
                    cols: 2
                    UserInputBox:
                        UserInputLabel:
                            text: "data-assets:"
                        MyCheckBox:
#                            id: data-assets
                            group: 'batches'
                            on_active: root.checkBoxClick('data-assets')


                    UserInputBox:
                        UserInputLabel:
                            text: "push:"
                        MyCheckBox:
#                            id: push
                            group: 'batches'
                            on_active: root.checkBoxClick('push')


                    UserInputBox:
                        UserInputLabel:
                            text: "ACT:"
                        MyCheckBox:
#                            id: ACT
                            group: 'batches'
                            on_active: root.checkBoxClick('ACT')

                    UserInputBox:
                        UserInputLabel:
                            text: "purging:"
                        MyCheckBox:
#                            id: purging
                            group: 'batches'
                            on_active: root.checkBoxClick('purging')

            # core path
            MyFileChooserBox
                MyFileChooserGrid:
                    MyFileChooserLabel:
                        text: "Core path:"
                    MyFileChooserExmp:
                        id: corePath
                        text: "C:\\GIT\\perso-core"

                BoxLayout
                    orientation: "horizontal"
                    spacing: 30
                    MyFileChooser:
                        id: coreChooser

                    fileChooserButton:
                        spacing: 20
                        on_release: Factory.MenuWindow().selected(root,"c",coreChooser.path)

                Label:
                    text: "* for modifying existing batch no need for core path"
                    font_size: 14
                    color: (0,0,0)
#                    bold: True
                    size_hint: None, None
                    size: self.texture_size
                    halign:'left'


            #Solution path
            MyFileChooserBox
                MyFileChooserGrid:
                    MyFileChooserLabel:
                        text: "Solution path:"

                    MyFileChooserExmp:
                        id: solutionPath
                        text: "C:\\GIT\\solution\\biz-units\\perso-biz\\Projects\\solution$QA"

                BoxLayout
                    orientation: "horizontal"
                    spacing: 30
                    MyFileChooser:
                        id: solutionChooser
                    fileChooserButton:
                        on_release: Factory.MenuWindow().selected(root,"s",solutionChooser.path)

        #menu
        tailBoxLayout:
            RoundedButton:
                text: "Back"
                on_release:
                    app.root.current = "menu"
                    root.manager.transition.direction = "right"

            RoundedButton:
                text: "Help"
                on_release: Factory.MenuWindow().openKB(root)

            RoundedButton:
                text: "Next"
                on_press: root.update(Factory.batchesDataWindow())
                on_release:
                    app.root.current = "batchesData"
                    root.manager.transition.direction = "left"




#:import utils kivy.utils
<batchesDataWindow>
    name: "batchesData"
    BoxLayout:
        padding: 10
        spacing: 20
        orientation: "vertical"
        size: root.width, root.height
        size_hint_x: None
        HeaderLabel:
            text: "Batches"

        ScrollView:
#            size_hint_y: 0.73
#            pos_hint: {'x': 0, 'y': 0.11}
            do_scroll_x: False
            do_scroll_y: True
            GridLayout:
                cols:1
                size: root.width, root.height
                BoxLayout:
                    orientation: "vertical"
                    GridLayout:
                        cols:2
                        spacing: 20
                        padding: 20
                        UserInputBox
                            UserInputLabel:
                                text: "id:"
                            UserInput:
                                id: batchId
                                hint_text: self.text

                        UserInputBox:
                            UserInputLabel:
                                text: "QA Batch?:"
                            MyCheckBox:
                                id: QaBatch
                                active: False

                        UserInputBox
                            UserInputLabel:
                                text: "startingTime:"
                            UserInput:
                                id: startingTime
                                text: '11:01:00'

                        UserInputBox
                            UserInputLabel:
                                text: "endingTime:"
                            UserInput:
                                id: endingTime
                                text: '13:00:00'

                        UserInputBox
                            UserInputLabel:
                                text: "excludeDays:"
                            UserInput:
                                id: excludeDays

                        UserInputBox
                            UserInputLabel:
                                text: "recurrencePattern:"
                            UserInput:
                                id: recurrencePattern
                                text: 'MINUTES'

                        UserInputBox
                            UserInputLabel:
                                text: "flowId:"
                            UserInput:
                                id: flowId
                                text: ''

                        UserInputBox
                            UserInputLabel:
                                text: "maxResult:"
                            UserInput:
                                id: maxResult
                                text: '50'

                        UserInputBox
                            UserInputLabel:
                                text: "importPagingSize:"
                            UserInput:
                                id: importPagingSize
                                text: '50'

                        UserInputBox
                            UserInputLabel:
                                text: "threadSplitter:"
                            UserInput:
                                id: threadSplitter
                                text: '1'

                        UserInputBox
                            UserInputLabel:
                                text: "importMethods:"
                            MySpinner:
                                id: importMethods
                                text: "choose"
                                values: 'whiteList','autoRegister', 'userSettings'
                                on_text: root.methods_update(importMethods.text)

                        UserInputBox
                            UserInputLabel:
                                text: "taskType:"
                            MySpinner:
                                id: taskType
                                text: "choose"
                                values: 'data assets','push', 'ACT', 'purging'

                        UserInputBox
                            UserInputLabel:
                                text: "intervalInMin:"
                            UserInput:
                                id: intervalInMin
                                text: '20160'

                        UserInputBox
                            UserInputLabel:
                                text: "groupName:"
                            UserInput:
                                id: groupName

                        UserInputBox
                            UserInputLabel:
                                text: "channel:"
                            UserInput:
                                id: channel

                        UserInputBox
                            UserInputLabel:
                                text: "pushNotificationOptIn:"
                            UserInput:
                                id: pushNotificationOptIn
                                text: 'True'

                        UserInputBox
                            UserInputLabel:
                                text: "Auto register API:"
                            MySpinner:
                                id: API
                                disabled: True
                                text: "choose"
                                values: 'getInsights','genereateInsights', 'executeFlow', 'getNumberOfInsights'

                        UserInputBox
                            UserInputLabel:
                                text: "Context for this API:"
                            UserInput:
                                id: Context
                                disabled: True


                #menu
                tailBoxLayout:
                    RoundedButton:
                        text: "Back"
                        on_release:
                            app.root.current = "batches"
                            root.manager.transition.direction = "right"

                    RoundedButton:
                        text: "Help"
                        on_release: Factory.MenuWindow().openKB(root)

                    RoundedButton:
                        text: "Run"
                        on_release: root.runFunc()