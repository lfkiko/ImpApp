#:import utils kivy.utils
#:import Factory kivy.factory.Factory

WindowManger:
    id: Window_Manger
    MenuWindow:
        name: "menu"
        id: Menu_Window
    enableInsightsWindow:
    categoryGroupsWindow:
    newFieldToFactWindow:
    batchesWindow:
    expressionsFormatsWindow
    DataAssetsPropertiesWindow:
    PushPropertiesWindow:
    ACTPropertiesWindow:
    PurgingPropertiesWindow
    demoDataWindow:
    dataLibraryWindow:
    sEditorVisibleWindow:
    newProjectWindow:
    breakingChangeWindow:
    PostManWindow:
    RequestsWindow:
    ThFactorWindow:
    SettingsWindow:
    jsonsWindow:
    updateFactAttributeWindow:

<WindowManger>
    size: root.width, root.height
    canvas.before:
        Color:
            rgba: (254/255,224/255,0/255,1)
        Rectangle:
            pos: self.pos
            size: self.size

<MenuWindow>
    BoxLayout:
        padding: 10
        spacing: 20
        orientation: "vertical"
        size: root.width, root.height

        HeaderLabel:
            text: "Menu"
            font_size: 64

        MyFileChooserBox:
            MyFileChooserGrid:
                MyFileChooserLabel:
                    text: "Solution path:"

                MyFileChooserExmp:
                    id: solutionPath
                    text: "C:\\GIT\\solution"

            fileChooserButton:
                pos_hint:{'x': 1}
                on_release: Factory.MenuWindow().selected(root,"s")


        GridLayout:
            cols: 3
            padding:10
            spacing: 20
            size: root.width, root.height
#            canvas:
#                Color:
#                    rgba: 1,1,1, .9
#                Line:
#                    width: 2.
#                    rectangle: (self.x, self.y, self.width, self.height)
            RoundedButton:
                text: "Json scripts"
                on_release:
                    app.root.current = "jsons"
                    root.manager.transition.direction = "left"
            RoundedButton:
                text: "Enable Insights"
                on_release:
                    app.root.current = "enableInsights"
                    root.manager.transition.direction = "left"
            RoundedButton:
                text: "Demo data"
                on_release:
                    app.root.current = "demoData"
                    root.manager.transition.direction = "left"
            RoundedButton:
                text: "Data Library"
                on_release:
                    app.root.current = "dataLibrary"
                    root.manager.transition.direction = "left"
            RoundedButton:
                text: "New Project"
                on_release:
                    app.root.current = "newProject"
                    root.manager.transition.direction = "left"
            RoundedButton:
                markup: True
                text: "[s][color=FFFFFF]Breaking Changes[/color][/s]"
#                on_release:
#                    app.root.current = "breakingChange"
#                    root.manager.transition.direction = "left"
            RoundedButton:
                markup: True
                text: "[s][color=FFFFFF]Post-man[/color][/s]"
                on_release:
                    app.root.current = "PostMan"
                    root.manager.transition.direction = "left"
            RoundedButton:
                text: "TH factor"
                on_release:
                    app.root.current = "ThFactor"
                    root.manager.transition.direction = "left"
            RoundedButton:
                markup: True
                text: "[s][color=FFFFFF]A-2-A[/color][/s]"
#                on_release:
#                    app.root.current = "breakingChange"
#                    root.manager.transition.direction = "left"


        tailBoxLayout:
            RoundedButton:
                text: "Settings"
                pos_hint: {'center_x': 0.5}
                on_release:
                    app.root.current = "settings"
                    root.manager.transition.direction = "up"

            RoundedExitButton:
                text: "Exit"
                bold: True
                pos_hint: {'center_x': 0.5}
                on_press: root.cleanExcels()
#                on_release: app.stop()

<jsonsWindow>
    name: "jsons"
    BoxLayout:
        padding: 10
        orientation: "vertical"
        size: root.width, root.height

        HeaderLabel:
            text: "Json generator"

        GridLayout:
            cols: 3
            padding:10
            spacing: 20
            size: root.width, root.height
#            canvas:
#                Color:
#                    rgba: 1,1,1, .9
#                Line:
#                    width: 2.
#                    rectangle: (self.x, self.y, self.width, self.height)
            RoundedButton:
                text: "SCategory Groups"
                on_release:
                    app.root.current = "categoryGroups"
                    root.manager.transition.direction = "left"
            RoundedButton:
                markup: True
                text: "New Field To Fact"
                on_release:
                    app.root.current = "newFieldToFact"
                    root.manager.transition.direction = "left"
            RoundedButton:
                markup: True
                text: "[s][color=FFFFFF]Batches[/color][/s]"
                on_release:
                    app.root.current = "batches"
                    root.manager.transition.direction = "left"

            RoundedButton:
                text: "SEditorVisible"
                on_release:
                    app.root.current = "sEditorVisible"
                    root.manager.transition.direction = "left"

            RoundedButton:
                markup: True
                text: "[s][color=FFFFFF]Expressions Formats[/color][/s]"
                on_release:
                    app.root.current = "expressionsFormats"
                    root.manager.transition.direction = "left"

            RoundedButton:
                markup: True
                text: "Update Fact Attribute"
                on_release:
                    app.root.current = "updateFactAttribute"
                    root.manager.transition.direction = "left"

        tailBoxLayout:
            RoundedButton:
                text: "Back"
                pos_hint: {'center_x': 0.5}
                on_release:
                    app.root.current = "menu"
                    root.manager.transition.direction = "right"
            RoundedExitButton:
                text: "Exit"
                bold: True
                pos_hint: {'center_x': 0.5}
                on_press: root.cleanExcels()



<SettingsWindow>
    name: "settings"

    BoxLayout:
        padding: 20
        orientation: "vertical"
        size: root.width, root.height
        pos_hint:{'center_y': 0.5}
        HeaderLabel:
            text: "Settings"

        ScrollView:
            do_scroll_y: True
            do_scroll_x: False
#            size_hint: (0.9,0.9)
            pos_hint:{'center_x':0.5,'center_y':0.5}
#            BoxLayout:
#                valign: 'top'
#                orientation: "vertical"
#                size_hint_y: None
#                height: 1000
            GridLayout:
                cols: 1
                size_hint: None, None
                size: (root.width, root.height)
                height: self.minimum_height
                Label:
                    id: defaultPath
                    text: root.currentDefaultPath
                    font_size: 24
                    color: (0,0,0)
                    size_hint: None, None
                    size: self.texture_size

                UserInputBox
                    size_hint_y: None
                    height:100
                    UserInputLabel:
                        text: "Git path:"
                    UserInputSetting:
                        id: defaultNewPath
                    fileChooserButton:
                        text: "Submit"
                        on_press: root.dpath(defaultNewPath.text, 'pathRoot')

                Label:
                    id: IntelliJPath
                    text: root.currentIntelliJPath
                    font_size: 24
                    color: (0,0,0)
                    size_hint: None, None
                    size: self.texture_size

                UserInputBox
                    size_hint_y: None
                    height:100
                    UserInputLabel:
                        text: "IntelliJ path:"
                    UserInputSetting:
                        id: NewIntelliJPath
                    fileChooserButton:
                        text: "Submit"
                        on_press: root.dpath(NewIntelliJPath.text, 'intelliJRoot')

                Label:
                    id:CorePath
                    text: root.currentCorePath
                    font_size: 24
                    color: (0,0,0)
                    size_hint: None, None
                    size: self.texture_size

                UserInputBox
                    size_hint_y: None
                    height:100
                    UserInputLabel:
                        text: "Perso-core path:"
                    UserInputSetting:
                        id: NewCorePath
                    fileChooserButton:
                        text: "Submit"
                        on_press: root.dpath(NewCorePath.text, 'corePath')

                Label:
                    id:ModelPath
                    text: root.currentModelPath
                    font_size: 24
                    color: (0,0,0)
                    size_hint: None, None
                    size: self.texture_size

                UserInputBox:
                    size_hint_y: None
                    height:100
                    UserInputLabel:
                        text: "Perso-model path:"
                    UserInputSetting:
                        id: NewModelPath
                    fileChooserButton:
                        text: "Submit"
                        on_press: root.dpath(NewModelPath.text, 'modelPath')

                Label:
                    id:EBPath
                    text: root.currentEBPath
                    font_size: 24
                    color: (0,0,0)
                    size_hint: None, None
                    size: self.texture_size

                UserInputBox:
                    size_hint_y: None
                    height:100
                    UserInputLabel:
                        text: "EB path:"
                    UserInputSetting:
                        id: NewEBPath
                    fileChooserButton:
                        text: "Submit"
                        on_press: root.dpath(NewEBPath.text, 'EBPath')

#                Label:
#                    id: LogicPath
#                    text: root.currentLogicPath
#                    font_size: 24
#                    color: (0,0,0)
#                    size_hint: None, None
#                    size: self.texture_size
#
#                UserInputBox:
#                    size_hint_y: None
#                    height:100
#                    UserInputLabel:
#                        text: "Git path:"
#                    UserInputSetting:
#                        id: NewLogicPath
#                    fileChooserButton:
#                        text: "Submit"
#                        on_press: root.dpath(defaultLogicPath.text, 'LogicPath')

        #menu
        tailBoxLayout:
            RoundedButton:
                text: "Back"
                pos_hint: {'center_x': 0.5}
                on_release:
                    app.root.current = "menu"
                    root.manager.transition.direction = "down"

            RoundedButton:
                text: "Help"
                pos_hint: {'center_x': 0.5}
                on_release:
                    app.root.current = "menu"
                    root.manager.transition.direction = "right"


<Button>
    font_size: 32
    size_hint_y: None
    height:100
    background_normal: ''
    background_color: utils.get_color_from_hex('#2E8BC0')


<RoundedButton@Button>
    background_color: (0,0,0,0)
    background_normal: ''
    color: (0,0,0,1)
    canvas.before:
        Color:
            rgba: utils.get_color_from_hex('#A0A0A0')
        RoundedRectangle:
            pos: self.pos
            size: self.size
            radius: [25]
    pos_hint: {'center_y': 0.5}



<RoundedExitButton@RoundedButton>
    background_color: (0,0,0,0)
    background_normal: ''
    color: (0,0,0,1)
    canvas.before:
        Color:
            rgba: utils.get_color_from_hex('#c2320e')
        RoundedRectangle:
            pos: self.pos
            size: self.size
            radius: [25]
    pos_hint: {'center_y': 0.5}

# Window layout ###############

<windowlayoutBoxLayout@BoxLayout>
    orientation: "vertical"
    padding: 10
    spacing: 20
#    size: root.width, root.height

###############################

#\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/#

### File chooser components ###

<MyFileChooserBox@BoxLayout>
    orientation: "horizontal"
    pos_hint:{'y': 0.5}
    size_hint: 1, None
    padding: 10
#    spacing: 20
#    canvas:
#        Color:
#            rgba: 1,1,1, .9
#        Line:
#            width: 2.
#            rectangle: (self.x, self.y, self.width, self.height)
#    halign:'left'

<MyFileChooserGrid@GridLayout>
    cols: 1
#    padding: 10
    spacing: 20
    pos_hint:{'y': 0.25}
    size_hint_y: None
    height:50
#    canvas:
#        Color:
#            rgba: 1,1,1, .9
#        Line:
#            width: 2.
#            rectangle: (self.x, self.y, self.width, self.height)

<MyFileChooserLabel@Label>
    font_size: 32
    color: (0,0,0)
    bold: True
    size_hint: None, None
    size: self.texture_size
#    halign:'left'

<MyFileChooserExmp@Label>
    font_size: 32
    color: (0,0,0)
    size_hint: None, None
    size: self.texture_size

<fileChooserButton@Button>
    text: "choose"
    spacing: 20
    color: (0,0,0,1)
    background_color: (0,0,0,0)
    background_normal: ''
    canvas.before:
        Color:
            rgba: utils.get_color_from_hex('#A0A0A0')
        RoundedRectangle:
            pos: self.pos
            size: self.size
            radius: [25]
    font_size: 24
    size_hint_y: None
    height:50
    size_hint_x: None
    width:100
    pos_hint: {'center_y': 0.5}
    spacing: 20


###############################

### File editor  ##############

<open_fileBoxLayout@BoxLayout>
    orientation: "horizontal"
    pos_hint:{'center_y': 0.5}

<openFileButton@Button>
    text: "OPEN"
    background_color: (0,0,0,0)
    background_normal: ''
    color: (0,0,0,1)
    canvas.before:
        Color:
            rgba: utils.get_color_from_hex('#A0A0A0')
        RoundedRectangle:
            pos: self.pos
            size: self.size
            radius: [25]
    font_size: 24
    size_hint_y: None
    height:50
    size_hint_x: None
    width:100
    pos_hint: {'center_x': 0.5,'center_y': 0.5}
    spacing: 20

###############################

<tailBoxLayout@BoxLayout>
    orientation: "horizontal"
    size_hint_y: None
    height:150
    padding: 10
    spacing: 20

<HeaderLabel@Label>
    font_size: 45
    bold: True
    color: (0,0,0,1)
    size_hint: None, None
    size: self.texture_size
    halign:'left'

<UserInputBox@BoxLayout>
#    canvas:
#        Color:
#            rgba: 1,1,1, .9
#        Line:
#            width: 2.
#            rectangle: (self.x, self.y, self.width, self.height)
    orientation: "horizontal"
    spacing:10
    padding: 10
#    size_hint_y: None
#    height:100
    pos_hint: {'center_y': 0.5}

<UserInputLabel@Label>
    font_size: 20
    bold: True
    focus: True
    color: (0,0,0)
    size_hint: None, None
    size: self.texture_size
    pos_hint: {'center_y': 0.5}

<UserInput@TextInput>
    font_size: 20
    multiline: False
    size_hint:(None,None)
    height: 50
    width: 200
    pos_hint: {'center_y': 0.5}
    valign: 'bottom'

<UserInputSetting@UserInput>
    width: 625

<MySpinner@Spinner>
    font_size: 20
    values_font_size:10
    pos_hint:{'center_y': 0.5}
    color: (0,0,0)
    size_hint_y: None
    height:60
    size_hint_x: None
    width:200
    background_color: (0,0,0,0)
    background_normal: ''
#    sync_height: True
    canvas.before:
        Color:
            rgba: utils.get_color_from_hex('#A0A0A0')
        RoundedRectangle:
            pos: self.pos
            size: self.size
            radius: [25]

<MyCheckBox@CheckBox>
    size_hint_y: None
    height:25
    size_hint_x: None
    width:25
    pos_hint: {'center_x': 0.5,'center_y': 0.5}
    spacing: 20
    canvas:
        Clear:
        Color:
            rgba: (0,0,0,1)
        Line:
            width: 1.
            rectangle: (self.x, self.y, self.width, self.height)
        Rectangle:
            source: self._checkbox_image
            size: sp(50), sp(50)
            pos: int(self.center_x - sp(25)), int(self.center_y - sp(25))

<GenericLabel@Label>
    font_size: 32
    color: (0,0,0)
    bold: True
    size_hint: None,None
    size: self.texture_size
    pos_hint: {'center_y': 0.5}